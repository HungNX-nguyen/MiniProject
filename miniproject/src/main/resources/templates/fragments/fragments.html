<!doctype html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="head">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title th:text="${title} ?: 'Hệ Thống Quản Lý'">Hệ Thống Quản Lý</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <link th:href="@{/css/fragment.css}" rel="stylesheet">


</head>

<body>

<!-- SIDEBAR -->
<nav th:fragment="header" class="sidebar">
    <div class="title">
        <i class="bi bi-building"></i> Hệ Thống
    </div>

    <a th:href="@{/}">
        <i class="bi bi-house-door"></i> Trang Chủ
    </a>

    <a th:href="@{/admin/departments}" sec:authorize="hasRole('ADMIN')">
        <i class="bi bi-diagram-3"></i> Phòng Ban
    </a>

    <a th:href="@{/manager/employees}" sec:authorize="hasAnyRole('ADMIN','MANAGER')">
        <i class="bi bi-people"></i> Nhân Viên
    </a>

    <a th:href="@{/manager/projects}" sec:authorize="hasAnyRole('ADMIN','MANAGER')">
        <i class="bi bi-kanban"></i> Dự Án
    </a>

    <a th:href="@{/employee/profile}" sec:authorize="hasRole('EMPLOYEE')">
        <i class="bi bi-person-circle"></i> Hồ Sơ Cá Nhân
    </a>

    <hr class="border-secondary mx-3">

    <div class="px-3 text-secondary small">Tài khoản</div>

    <div class="px-3 mt-1">
        <strong class="text-white" sec:authentication="name">User</strong>
        <div><small sec:authentication="principal.authorities"></small></div>
    </div>

    <form th:action="@{/logout}" method="post" class="mt-3 px-3">
        <button class="btn btn-outline-light w-100">
            <i class="bi bi-box-arrow-right"></i> Đăng xuất
        </button>
    </form>
</nav>

<!-- CONTENT WRAPPER -->
<div class="content">
    <div>
        <!-- Nội dung trang sẽ hiển thị ở đây -->
        <div th:fragment="content"></div>
    </div>
</div>

<!-- FOOTER -->
<footer th:fragment="footer" class="text-center py-3 mt-4">
    <div class="text-muted">© 2025 Hệ Thống Quản Lý Công Ty</div>
</footer>

<!-- SCRIPTS -->
<div th:fragment="scripts">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script th:src="@{/js/main.js}"></script>
</div>

</body>
</html>
